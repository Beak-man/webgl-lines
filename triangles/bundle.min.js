require=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({4:[function(require,module,exports){(function(__dirname){"use strict";var _slicedToArray=function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){var _arr=[];for(var _iterator=arr[Symbol.iterator](),_step;!(_step=_iterator.next()).done;){_arr.push(_step.value);if(i&&_arr.length===i)break}return _arr}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var MAX_POINTS=8,MIN_DIST=20;var distance=require("vectors/dist")(2);var throttle=require("lodash.throttle");var random=require("randf");var stroke=require("extrude-polyline")({thickness:20,join:"miter",cap:"square"});var context=require("../base")(render,{name:__dirname,description:"_toch and drag to draw_  \nrendering with triangles  "});var canvas=context.canvas;var path=[[40,105],[60,98],[84,100],[96,116],[111,133],[135,140],[153,130]];var colors=["#4f4f4f","#767676","#d9662d","#d98a2d"];var lastPosition=path[path.length-1];function render(dt){var width=canvas.width;var height=canvas.height;context.clearRect(0,0,width,height);var mesh=stroke.build(path);mesh.cells.forEach(function(cell,i){var _cell=_slicedToArray(cell,3);var f0=_cell[0];var f1=_cell[1];var f2=_cell[2];var v0=mesh.positions[f0],v1=mesh.positions[f1],v2=mesh.positions[f2];context.beginPath();context.lineTo(v0[0],v0[1]);context.lineTo(v1[0],v1[1]);context.lineTo(v2[0],v2[1]);context.fillStyle=colors[i%colors.length];context.fill()})}var adder=throttle(addPoint,30);var dragging=false;require("touches")(window,{filtered:true}).on("move",adder).on("start",function(){path.length=0;stroke.thickness=random(10,30);dragging=true}).on("end",function(){dragging=false});function addPoint(ev,position){if(!dragging){return}if(distance(position,lastPosition)<MIN_DIST){return}if(path.length>MAX_POINTS)path.shift();path.push(position);lastPosition=position}}).call(this,"/triangles")},{"../base":5,"extrude-polyline":30,"lodash.throttle":83,randf:104,touches:106,"vectors/dist":109}],109:[function(require,module,exports){module.exports=generator;function generator(dims){dims=+dims|0;var body=[];body.push("return function dist"+dims+"(vec, other) {");var els=[];for(var i=0;i<dims;i+=1){body.push("var p"+i+" = other["+i+"]-vec["+i+"]");els.push("p"+i+"*p"+i)}body.push("return Math.sqrt("+els.join(" + ")+")");body.push("}");return Function(body.join("\n"))()}},{}],104:[function(require,module,exports){function random(start,end){var n0=typeof start==="number",n1=typeof end==="number";if(n0&&!n1){end=start;start=0}else if(!n0&&!n1){start=0;end=1}return start+Math.random()*(end-start)}module.exports=random},{}],83:[function(require,module,exports){var debounce=require("lodash.debounce");var FUNC_ERROR_TEXT="Expected a function";var debounceOptions={leading:false,maxWait:0,trailing:false};function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(options===false){leading=false}else if(isObject(options)){leading="leading"in options?!!options.leading:leading;trailing="trailing"in options?!!options.trailing:trailing}debounceOptions.leading=leading;debounceOptions.maxWait=+wait;debounceOptions.trailing=trailing;return debounce(func,wait,debounceOptions)}function isObject(value){var type=typeof value;return type=="function"||value&&type=="object"||false}module.exports=throttle},{"lodash.debounce":84}],84:[function(require,module,exports){var isNative=require("lodash.isnative");var FUNC_ERROR_TEXT="Expected a function";var nativeMax=Math.max,nativeNow=isNative(nativeNow=Date.now)&&nativeNow;var now=nativeNow||function(){return(new Date).getTime()};function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=wait<0?0:+wait||0;if(options===true){var leading=true;trailing=false}else if(isObject(options)){leading=options.leading;maxWait="maxWait"in options&&nativeMax(+options.maxWait||0,wait);trailing="trailing"in options?options.trailing:trailing}function cancel(){if(timeoutId){clearTimeout(timeoutId)}if(maxTimeoutId){clearTimeout(maxTimeoutId)}maxTimeoutId=timeoutId=trailingCall=undefined}function delayed(){var remaining=wait-(now()-stamp);if(remaining<=0||remaining>wait){if(maxTimeoutId){clearTimeout(maxTimeoutId)}var isCalled=trailingCall;maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null}}}else{timeoutId=setTimeout(delayed,remaining)}}function maxDelayed(){if(timeoutId){clearTimeout(timeoutId)}maxTimeoutId=timeoutId=trailingCall=undefined;if(trailing||maxWait!==wait){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null}}}function debounced(){args=arguments;stamp=now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId}else{if(!maxTimeoutId&&!leading){lastCalled=stamp}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0||remaining>maxWait;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId)}lastCalled=stamp;result=func.apply(thisArg,args)}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining)}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId)}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait)}if(leadingCall){isCalled=true;result=func.apply(thisArg,args)}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=null}return result}debounced.cancel=cancel;return debounced}function isObject(value){var type=typeof value;return type=="function"||value&&type=="object"||false}module.exports=debounce},{"lodash.isnative":85}],85:[function(require,module,exports){var funcTag="[object Function]";var reHostCtor=/^\[object .+?Constructor\]$/;var reRegExpChars=/[.*+?^${}()|[\]\/\\]/g,reHasRegExpChars=RegExp(reRegExpChars.source);function baseToString(value){if(typeof value=="string"){return value}return value==null?"":value+""}function isObjectLike(value){return value&&typeof value=="object"||false}var objectProto=Object.prototype;var fnToString=Function.prototype.toString;var objToString=objectProto.toString;var reNative=RegExp("^"+escapeRegExp(objToString).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function isNative(value){if(value==null){return false}if(objToString.call(value)==funcTag){return reNative.test(fnToString.call(value))}return isObjectLike(value)&&reHostCtor.test(value)||false}function escapeRegExp(string){string=baseToString(string);return string&&reHasRegExpChars.test(string)?string.replace(reRegExpChars,"\\$&"):string}module.exports=isNative},{}],30:[function(require,module,exports){var number=require("as-number");var vec=require("./vecutil");var tmp=vec.create();var capEnd=vec.create();var lineA=vec.create();var lineB=vec.create();var tangent=vec.create();var miter=vec.create();var util=require("polyline-miter-util");var computeMiter=util.computeMiter,normal=util.normal,direction=util.direction;function Stroke(opt){if(!(this instanceof Stroke))return new Stroke(opt);opt=opt||{};this.miterLimit=number(opt.miterLimit,10);this.thickness=number(opt.thickness,1);this.join=opt.join||"miter";this.cap=opt.cap||"butt";this._normal=null;this._lastFlip=-1;this._started=false}Stroke.prototype.mapThickness=function(point,i,points){return this.thickness};Stroke.prototype.build=function(points){var complex={positions:[],cells:[]};if(points.length<=1)return complex;var total=points.length;this._lastFlip=-1;this._started=false;this._normal=null;for(var i=1,count=0;i<total;i++){var last=points[i-1];var cur=points[i];var next=i<points.length-1?points[i+1]:null;var thickness=this.mapThickness(cur,i,points);var amt=this._seg(complex,count,last,cur,next,thickness/2);count+=amt}return complex};Stroke.prototype._seg=function(complex,index,last,cur,next,halfThick){var count=0;var cells=complex.cells;var positions=complex.positions;var capSquare=this.cap==="square";var joinBevel=this.join==="bevel";direction(lineA,cur,last);if(!this._normal){this._normal=vec.create();normal(this._normal,lineA)}if(!this._started){this._started=true;if(capSquare){vec.scaleAndAdd(capEnd,last,lineA,-halfThick);last=capEnd}extrusions(positions,last,this._normal,halfThick)}cells.push([index+0,index+1,index+2]);if(!next){normal(this._normal,lineA);if(capSquare){vec.scaleAndAdd(capEnd,cur,lineA,halfThick);cur=capEnd}extrusions(positions,cur,this._normal,halfThick);cells.push(this._lastFlip===1?[index,index+2,index+3]:[index+2,index+1,index+3]);count+=2}else{direction(lineB,next,cur);var miterLen=computeMiter(tangent,miter,lineA,lineB,halfThick);var flip=vec.dot(tangent,this._normal)<0?-1:1;var bevel=joinBevel;if(!bevel&&this.join==="miter"){var limit=miterLen/halfThick;if(limit>this.miterLimit)bevel=true}if(bevel){vec.scaleAndAdd(tmp,cur,this._normal,-halfThick*flip);positions.push(vec.clone(tmp));vec.scaleAndAdd(tmp,cur,miter,miterLen*flip);positions.push(vec.clone(tmp));cells.push(this._lastFlip!==-flip?[index,index+2,index+3]:[index+2,index+1,index+3]);cells.push([index+2,index+3,index+4]);normal(tmp,lineB);vec.copy(this._normal,tmp);vec.scaleAndAdd(tmp,cur,tmp,-halfThick*flip);positions.push(vec.clone(tmp));count+=3}else{extrusions(positions,cur,miter,miterLen);cells.push(this._lastFlip===1?[index,index+2,index+3]:[index+2,index+1,index+3]);flip=-1;vec.copy(this._normal,miter);count+=2}this._lastFlip=flip}return count};function extrusions(positions,point,normal,scale){vec.scaleAndAdd(tmp,point,normal,-scale);positions.push(vec.clone(tmp));vec.scaleAndAdd(tmp,point,normal,scale);positions.push(vec.clone(tmp))}module.exports=Stroke},{"./vecutil":32,"as-number":31,"polyline-miter-util":95}],32:[function(require,module,exports){function clone(arr){return[arr[0],arr[1]]}function create(){return[0,0]}module.exports={create:create,clone:clone,copy:require("gl-vec2/copy"),scaleAndAdd:require("gl-vec2/scaleAndAdd"),dot:require("gl-vec2/dot")}},{"gl-vec2/copy":72,"gl-vec2/dot":73,"gl-vec2/scaleAndAdd":75}],75:[function(require,module,exports){module.exports=scaleAndAdd;function scaleAndAdd(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;return out}},{}],72:[function(require,module,exports){module.exports=copy;function copy(out,a){out[0]=a[0];out[1]=a[1];return out}},{}],31:[function(require,module,exports){module.exports=function numtype(num,def){return typeof num==="number"?num:typeof def==="number"?def:0}},{}]},{},[4]);